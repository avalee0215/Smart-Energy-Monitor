Version 4
SHEET 1 2800 2020
WIRE 416 -352 416 -368
WIRE 576 -352 576 -368
WIRE 416 -288 416 -352
WIRE 576 -288 576 -352
WIRE 416 -176 416 -208
WIRE 576 -176 576 -208
WIRE 336 32 304 32
WIRE 592 32 336 32
WIRE 832 32 592 32
WIRE 592 48 592 32
WIRE 832 96 832 32
WIRE 1392 96 1344 96
WIRE 1456 96 1392 96
WIRE 1616 96 1536 96
WIRE 1680 96 1616 96
WIRE 1696 96 1680 96
WIRE 304 176 304 32
WIRE 592 176 592 128
WIRE 1616 176 1616 96
WIRE 832 224 832 176
WIRE 928 224 832 224
WIRE 944 224 928 224
WIRE 832 256 832 224
WIRE 1616 272 1616 240
WIRE 592 304 592 256
WIRE 688 304 592 304
WIRE 704 304 688 304
WIRE 592 320 592 304
WIRE 304 416 304 256
WIRE 480 416 304 416
WIRE 592 416 592 400
WIRE 592 416 480 416
WIRE 832 416 832 336
WIRE 832 416 592 416
WIRE 1376 432 1360 432
WIRE 1456 432 1376 432
WIRE 1568 432 1536 432
WIRE 1632 432 1568 432
WIRE 1664 432 1632 432
WIRE 480 448 480 416
WIRE 1568 480 1568 432
WIRE 1568 592 1568 544
WIRE 1344 784 1312 784
WIRE 1440 784 1344 784
WIRE 1552 784 1504 784
WIRE 1712 784 1632 784
WIRE 1856 784 1712 784
WIRE 2272 784 2112 784
WIRE 2352 784 2272 784
WIRE 2400 784 2352 784
WIRE 656 800 576 800
WIRE 800 800 736 800
WIRE 656 864 656 848
WIRE 448 880 352 880
WIRE 576 880 576 800
WIRE 576 880 528 880
WIRE 656 896 656 864
WIRE 576 912 576 880
WIRE 624 912 576 912
WIRE 1712 912 1712 784
WIRE 2272 912 2272 784
WIRE 2400 912 2400 784
WIRE 800 928 800 800
WIRE 800 928 688 928
WIRE 880 928 800 928
WIRE 992 928 880 928
WIRE 624 944 576 944
WIRE 368 976 352 976
WIRE 400 976 368 976
WIRE 576 976 576 944
WIRE 576 976 480 976
WIRE 576 992 576 976
WIRE 656 1008 656 960
WIRE 1712 1104 1712 976
WIRE 1712 1104 1312 1104
WIRE 1984 1104 1984 880
WIRE 1984 1104 1712 1104
WIRE 2272 1104 2272 976
WIRE 2272 1104 1984 1104
WIRE 2400 1104 2400 992
WIRE 2400 1104 2272 1104
WIRE 576 1120 576 1072
WIRE 576 1136 576 1120
WIRE 656 1296 576 1296
WIRE 800 1296 736 1296
WIRE 656 1360 656 1344
WIRE 448 1376 352 1376
WIRE 576 1376 576 1296
WIRE 576 1376 528 1376
WIRE 656 1392 656 1360
WIRE 576 1408 576 1376
WIRE 624 1408 576 1408
WIRE 800 1424 800 1296
WIRE 800 1424 688 1424
WIRE 880 1424 800 1424
WIRE 896 1424 880 1424
WIRE 1424 1424 1392 1424
WIRE 1568 1424 1424 1424
WIRE 2192 1424 2160 1424
WIRE 2400 1424 2192 1424
WIRE 624 1440 576 1440
WIRE 2448 1440 2448 1408
WIRE 1616 1456 1616 1424
WIRE 2400 1456 2400 1424
WIRE 2416 1456 2400 1456
WIRE 368 1472 352 1472
WIRE 400 1472 368 1472
WIRE 576 1472 576 1440
WIRE 576 1472 480 1472
WIRE 1568 1472 1568 1424
WIRE 1584 1472 1568 1472
WIRE 2608 1472 2480 1472
WIRE 2736 1472 2608 1472
WIRE 2768 1472 2736 1472
WIRE 576 1488 576 1472
WIRE 1776 1488 1648 1488
WIRE 1904 1488 1776 1488
WIRE 1936 1488 1904 1488
WIRE 2176 1488 2144 1488
WIRE 2304 1488 2176 1488
WIRE 2400 1488 2384 1488
WIRE 2416 1488 2400 1488
WIRE 656 1504 656 1456
WIRE 1344 1504 1312 1504
WIRE 1472 1504 1344 1504
WIRE 1568 1504 1552 1504
WIRE 1584 1504 1568 1504
WIRE 2448 1552 2448 1504
WIRE 1616 1568 1616 1520
WIRE 576 1616 576 1568
WIRE 576 1632 576 1616
WIRE 2400 1648 2400 1488
WIRE 2448 1648 2400 1648
WIRE 2608 1648 2608 1472
WIRE 2608 1648 2528 1648
WIRE 1568 1664 1568 1504
WIRE 1616 1664 1568 1664
WIRE 1776 1664 1776 1488
WIRE 1776 1664 1696 1664
FLAG 928 224 Vvs
FLAG 688 304 Vis
FLAG 480 448 0
FLAG 656 1008 0
FLAG 416 -176 0
FLAG 416 -352 5V
FLAG 656 864 5V
FLAG 368 976 Vis
FLAG 880 928 Vi_out
FLAG 576 1120 2.1V
FLAG 576 -176 0
FLAG 576 -352 2.1V
FLAG 656 1504 0
FLAG 656 1360 5V
FLAG 368 1472 Vvs
FLAG 576 1616 2.1V
FLAG 880 1424 Vv_out
FLAG 1568 592 0
FLAG 1376 432 Vv_out
FLAG 1632 432 Vv_filter
FLAG 352 1376 0
FLAG 352 880 0
FLAG 1984 1104 0
FLAG 1344 784 Vac
FLAG 336 32 Vac
FLAG 2352 784 5v
FLAG 1616 1568 0
FLAG 1616 1424 5V
FLAG 1616 272 0
FLAG 1392 96 Vi_out
FLAG 1680 96 Vi_filter
FLAG 1424 1424 2.1V
FLAG 1344 1504 Vi_filter
FLAG 2448 1552 0
FLAG 2448 1408 5V
FLAG 2192 1424 2.1V
FLAG 2176 1488 Vv_filter
FLAG 1904 1488 Vi_final
FLAG 2736 1472 Vv_final
SYMBOL voltage 304 160 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName Vsource
SYMATTR Value SINE(0 21.7789 500)
SYMBOL ind 576 32 R0
SYMATTR InstName Lload
SYMATTR Value 4mH
SYMBOL res 576 160 R0
SYMATTR InstName Rload
SYMATTR Value 17.034
SYMBOL res 576 304 R0
SYMATTR InstName Rs
SYMATTR Value 0.5
SYMBOL res 816 80 R0
SYMATTR InstName Ra
SYMATTR Value 100k
SYMBOL res 816 240 R0
SYMATTR InstName Rb
SYMATTR Value 4.7k
SYMBOL OpAmps\\opamp2 656 864 R0
SYMATTR InstName Opamp_1
SYMATTR Value LM324
SYMBOL voltage 416 -304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL res 544 864 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1b1
SYMATTR Value 5.6k
SYMBOL res 752 784 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2a1
SYMATTR Value 13k
SYMBOL res 496 960 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1a1
SYMATTR Value 5.6k
SYMBOL res 592 1088 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2b1
SYMATTR Value 13k
SYMBOL voltage 576 -304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 2.1
SYMBOL OpAmps\\opamp2 656 1360 R0
SYMATTR InstName Opamp_2
SYMATTR Value LM324
SYMBOL res 544 1360 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1b2
SYMATTR Value 13k
SYMBOL res 752 1280 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2a2
SYMATTR Value 13k
SYMBOL res 496 1456 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1a2
SYMATTR Value 8.6k
SYMBOL res 592 1584 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2b2
SYMATTR Value 13k
SYMBOL res 1552 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 15k
SYMBOL cap 1552 480 R0
SYMATTR InstName C2
SYMATTR Value 1nF
SYMBOL diode 1440 800 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL res 1648 768 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rin
SYMATTR Value 33
SYMBOL cap 1696 912 R0
SYMATTR InstName Cin
SYMATTR Value 47µ
SYMBOL PowerProducts\\LT1085-5 1984 784 R0
SYMATTR InstName U1
SYMBOL cap 2256 912 R0
SYMATTR InstName C4
SYMATTR Value 10µ
SYMBOL res 2384 896 R0
SYMATTR InstName Rl
SYMATTR Value 100
SYMBOL OpAmps\\opamp2 1616 1424 R0
SYMATTR InstName Opamp_3
SYMATTR Value LM324
SYMBOL res 1552 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 15k
SYMBOL cap 1600 176 R0
SYMATTR InstName C3
SYMATTR Value 1n
SYMBOL res 1568 1488 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 20k
SYMBOL res 1712 1648 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1Meg
SYMBOL OpAmps\\opamp2 2448 1408 R0
SYMATTR InstName Opamp_5
SYMATTR Value LM324
SYMBOL res 2400 1472 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 20k
SYMBOL res 2544 1632 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 1Meg
TEXT 256 -56 Left 3 ;Voltage and Current sensing circuit design:
TEXT 1344 -304 Left 2 ;.tran 0 0.5 0 0.001m
TEXT 432 80 Left 1 ;Load\n(2.5VA - 7.5VA)
TEXT 432 336 Left 1 ;Current sensing
TEXT 1008 96 Left 1 ;Voltage sensing
TEXT 1344 -264 Left 2 !.lib LM324.lib
TEXT 264 -424 Left 3 ;Voltage sources:
TEXT 296 688 Left 2 ;- Current sensing defferential amplifier:
TEXT 272 600 Left 3 ;Level-shifting and amplification circuit design:
TEXT 304 1216 Left 2 ;- Voltage sensing defferential amplifier:
TEXT 1352 -56 Left 3 ;Filter circuit design:
TEXT 1360 16 Left 2 ;- Current sensing filter:
TEXT 1360 320 Left 2 ;- Voltage sensing filter:
TEXT 1344 -216 Left 2 !.ac dec 30 1 1Meg
TEXT 1352 688 Left 3 ;5V regulator circuit design:
TEXT 1344 -352 Left 3 ;Features:
TEXT 1336 1256 Left 3 ;Voltage zero crossing detector circuit design:
TEXT 1344 1328 Left 2 ;Current sensing comparator:
TEXT 2232 1336 Left 2 ;Voltage sensing comparator:
LINE Normal 736 256 736 48 2
LINE Normal 560 256 736 256 2
LINE Normal 560 48 560 256 2
LINE Normal 736 48 560 48 2
LINE Normal 560 272 736 272 2
LINE Normal 560 400 560 272 2
LINE Normal 736 400 560 400 2
LINE Normal 736 272 736 400 2
LINE Normal 784 400 784 48 2
LINE Normal 992 400 784 400 2
LINE Normal 992 48 992 400 2
LINE Normal 784 48 992 48 2
LINE Normal 1312 -176 1312 -384 2
LINE Normal 1616 -176 1312 -176 2
LINE Normal 1616 -384 1616 -176 2
LINE Normal 1312 -384 1616 -384 2
